{% extends "base.html" %}

{% block title %}{% if business %}Edit{% else %}Create{% endif %} Business - ConnectHub{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-4xl font-bold text-gray-800 mb-8">
        {% if business %}Edit{% else %}Create{% endif %} Business
    </h1>
    
    <form 
        method="post" 
        enctype="multipart/form-data" 
        action="{% if business %}/dashboard/business/{{ business.id }}{% else %}/dashboard/business{% endif %}"
        class="bg-white rounded-xl shadow-md p-8 space-y-6"
    >
        <!-- Basic Info -->
        <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Basic Information</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Business Name <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="text" 
                        name="business_name" 
                        required
                        value="{{ business.business_name if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        maxlength="100"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Tagline <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="text" 
                        name="tagline" 
                        required
                        value="{{ business.tagline if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        maxlength="150"
                        placeholder="One sentence describing your business"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Category <span class="text-red-500">*</span>
                    </label>
                    <select 
                        name="category" 
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                    >
                        <option value="">Select Category</option>
                        <option value="Technology" {% if business and (business.category_value == "Technology" or (business.category and business.category.value == "Technology")) %}selected{% endif %}>Technology</option>
                        <option value="Marketing" {% if business and (business.category_value == "Marketing" or (business.category and business.category.value == "Marketing")) %}selected{% endif %}>Marketing</option>
                        <option value="Finance" {% if business and (business.category_value == "Finance" or (business.category and business.category.value == "Finance")) %}selected{% endif %}>Finance</option>
                        <option value="Healthcare" {% if business and (business.category_value == "Healthcare" or (business.category and business.category.value == "Healthcare")) %}selected{% endif %}>Healthcare</option>
                        <option value="Education" {% if business and (business.category_value == "Education" or (business.category and business.category.value == "Education")) %}selected{% endif %}>Education</option>
                        <option value="Other" {% if business and (business.category_value == "Other" or (business.category and business.category.value == "Other")) %}selected{% endif %}>Other</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Description <span class="text-red-500">*</span>
                    </label>
                    <textarea 
                        name="description" 
                        required
                        rows="6"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        placeholder="Describe your business, services, and what makes you unique..."
                    >{{ business.description if business else '' }}</textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Location <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="text" 
                        name="location" 
                        required
                        value="{{ business.location if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        placeholder="City, State or Country"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Industry Tags
                    </label>
                    <input 
                        type="text" 
                        name="industry_tags" 
                        value="{% if business and business.industry_tags %}{{ business.industry_tags|join(', ') }}{% endif %}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        placeholder="Technology, SaaS, AI, etc. (comma-separated)"
                    >
                    <p class="text-sm text-gray-500 mt-1">Separate tags with commas</p>
                </div>
            </div>
        </div>
        
        <!-- Contact Information -->
        <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Contact Information</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Email <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="email" 
                        name="contact_email" 
                        required
                        value="{{ business.contact_email if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Phone
                    </label>
                    <input 
                        type="tel" 
                        name="contact_phone" 
                        value="{{ business.contact_phone if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Website
                    </label>
                    <input 
                        type="url" 
                        name="website_url" 
                        value="{{ business.website_url if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        placeholder="https://example.com"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        LinkedIn URL
                    </label>
                    <input 
                        type="url" 
                        name="linkedin_url" 
                        value="{{ business.linkedin_url if business else '' }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        placeholder="https://linkedin.com/company/..."
                    >
                </div>
            </div>
        </div>
        
        <!-- Media -->
        <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Media</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Logo
                    </label>
                    {% if business and business.logo_url %}
                    <div class="mb-2">
                        <img src="{{ business.logo_url }}" alt="Current logo" class="w-24 h-24 rounded-lg">
                        <p class="text-sm text-gray-500 mt-1">Current logo</p>
                    </div>
                    {% endif %}
                    <input 
                        type="file" 
                        name="logo" 
                        accept="image/jpeg,image/png,image/webp"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                    >
                    <p class="text-sm text-gray-500 mt-1">JPG, PNG, or WebP (max 5MB)</p>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Cover Image
                    </label>
                    {% if business and business.cover_image_url %}
                    <div class="mb-2">
                        <img src="{{ business.cover_image_url }}" alt="Current cover" class="w-full h-32 rounded-lg object-cover">
                        <p class="text-sm text-gray-500 mt-1">Current cover image</p>
                    </div>
                    {% endif %}
                    <input 
                        type="file" 
                        name="cover_image" 
                        accept="image/jpeg,image/png,image/webp"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                    >
                    <p class="text-sm text-gray-500 mt-1">JPG, PNG, or WebP (max 5MB)</p>
                </div>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="flex gap-4 pt-6 border-t border-gray-200">
            <button 
                type="submit" 
                class="flex-1 px-6 py-3 gradient-bg text-white rounded-lg hover:opacity-90 transition font-semibold"
            >
                {% if business %}Update{% else %}Create{% endif %} Business
            </button>
            <a 
                href="{% if business %}/business/{{ business.slug }}{% else %}/dashboard{% endif %}" 
                class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
            >
                Cancel
            </a>
            {% if business %}
            <form method="post" action="/dashboard/business/{{ business.id }}/delete" class="inline" onsubmit="return confirm('Are you sure you want to delete this business? This action cannot be undone. All associated images and data will be permanently deleted.');">
                <button 
                    type="submit" 
                    class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition"
                >
                    Delete
                </button>
            </form>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}

